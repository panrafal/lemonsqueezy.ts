import{fetch as g}from"undici";import{join as L}from"node:path";async function u({apiKey:r,apiVersion:s="v1",baseUrl:t="https://api.lemonsqueezy.com",data:i,headers:p,include:n,method:o="GET",page:m,params:S,path:O}){try{let a=new URL(L(s,O),t);n&&a.searchParams.append("include",n.map(d=>l[d]).join(",")),m&&a.searchParams.append("page",m.toString()),S&&o==="GET"&&Object.entries(S).forEach(([d,e])=>a.searchParams.append(d,e));let c=await g(a.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${r}`,"Content-Type":"application/vnd.api+json",...p},method:o,...i&&o!=="GET"?{body:JSON.stringify(i)}:{}});if(!c.ok){let d=await c.json();throw{status:c.status,message:c.statusText,errors:d.errors}}let b=await c.json();if(b.errors&&b.errors.length>0)throw b;return b}catch(a){throw a}}var l=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(l||{});async function R(r){let{orderId:s,orderItemId:t,productId:i,storeId:p,variantId:n,...o}=r;return u({params:{...s?{order_id:s}:{},...t?{order_item_id:t}:{},...i?{product_id:i}:{},...p?{store_id:p}:{},...n?{variant_id:n}:{}},path:"/subscriptions",...o})}async function f(r){let{id:s,...t}=r;return u({path:`/subscriptions/${s}`,...t})}async function h(r){let{billingAnchor:s,cancelled:t,id:i,pause:p,productId:n,variantId:o,...m}=r;return u({data:{data:{attributes:{billing_anchor:s,cancelled:t,pause:p,product_id:n,variant_id:o},id:i,type:"subscriptions"}},path:`/subscriptions/${i}`,method:"PATCH",...m})}async function y(r){let{id:s,...t}=r;return u({path:`/subscriptions/${s}`,method:"DELETE",...t})}var B={listAllSubscriptions:R,retrieveSubscription:f,updateSubscription:h,cancelSubscription:y};export{y as cancelSubscription,B as default,R as listAllSubscriptions,f as retrieveSubscription,h as updateSubscription};
//# sourceMappingURL=subscription.mjs.map