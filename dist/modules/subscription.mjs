import{fetch as x}from"undici";import{join as L}from"node:path";var S=class extends Error{constructor(t,i,n){super(i);this.status=t;this.message=i;this.errors=n;this.name="LemonSqueezyError"}};async function u({apiKey:r,apiVersion:s="v1",baseUrl:t="https://api.lemonsqueezy.com",data:i,headers:n,include:o,method:p="GET",page:m,params:R,path:O}){try{let a=new URL(L(s,O),t);o&&a.searchParams.append("include",o.map(d=>l[d]).join(",")),m&&a.searchParams.append("page",m.toString()),R&&p==="GET"&&Object.entries(R).forEach(([d,e])=>a.searchParams.append(d,e));let c=await x(a.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${r}`,"Content-Type":"application/vnd.api+json",...n},method:p,...i&&p!=="GET"?{body:JSON.stringify(i)}:{}});if(!c.ok){let d=await c.json();throw new S(c.status,c.statusText,d.errors)}let b=await c.json();if(b.errors&&b.errors.length>0)throw b;return b}catch(a){throw a}}var l=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(l||{});async function f(r){let{orderId:s,orderItemId:t,productId:i,storeId:n,variantId:o,...p}=r;return u({params:{...s?{order_id:s}:{},...t?{order_item_id:t}:{},...i?{product_id:i}:{},...n?{store_id:n}:{},...o?{variant_id:o}:{}},path:"/subscriptions",...p})}async function h(r){let{id:s,...t}=r;return u({path:`/subscriptions/${s}`,...t})}async function y(r){let{billingAnchor:s,cancelled:t,id:i,pause:n,productId:o,variantId:p,...m}=r;return u({data:{data:{attributes:{billing_anchor:s,cancelled:t,pause:n,product_id:o,variant_id:p},id:i,type:"subscriptions"}},path:`/subscriptions/${i}`,method:"PATCH",...m})}async function g(r){let{id:s,...t}=r;return u({path:`/subscriptions/${s}`,method:"DELETE",...t})}var U={listAllSubscriptions:f,retrieveSubscription:h,updateSubscription:y,cancelSubscription:g};export{g as cancelSubscription,U as default,f as listAllSubscriptions,h as retrieveSubscription,y as updateSubscription};
//# sourceMappingURL=subscription.mjs.map