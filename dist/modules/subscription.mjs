import{fetch as g}from"undici";import{join as O}from"node:path";async function d({apiKey:i,apiVersion:s="v1",baseUrl:t="https://api.lemonsqueezy.com",data:r,headers:p,include:o,method:n="GET",page:m,params:S,path:y}){try{let a=new URL(O(s,y),t);o&&a.searchParams.append("include",o.map(c=>l[c]).join(",")),m&&a.searchParams.append("page",m.toString()),S&&n==="GET"&&Object.entries(S).forEach(([c,e])=>a.searchParams.append(c,e));let u=await g(a.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${i}`,"Content-Type":"application/vnd.api+json",...p},method:n,...r&&n!=="GET"?{body:JSON.stringify(r)}:{}});if(!u.ok){let c=await u.json();throw{status:u.status,message:u.statusText,errors:c.errors}}let b=await u.json();if(b.errors&&b.errors.length>0)throw b;return b}catch(a){throw a}}var l=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(l||{});async function f(i){let{orderId:s,orderItemId:t,productId:r,storeId:p,variantId:o,...n}=i;return d({params:{...s?{order_id:s}:{},...t?{order_item_id:t}:{},...r?{product_id:r}:{},...p?{store_id:p}:{},...o?{variant_id:o}:{}},path:"/subscriptions",...n})}async function R(i){let{id:s,...t}=i;return d({path:`/subscriptions/${s}`,...t})}async function h(i){let{billingAnchor:s,cancelled:t,id:r,pause:p,productId:o,variantId:n,...m}=i;return d({data:{data:{attributes:{billing_anchor:s,cancelled:t,pause:p,product_id:o,variant_id:n},id:r,type:"subscriptions"}},path:`/subscriptions/${r}`,method:"PATCH",...m})}var B={listAllSubscriptions:f,retrieveSubscription:R,updateSubscription:h};export{B as default,f as listAllSubscriptions,R as retrieveSubscription,h as updateSubscription};
//# sourceMappingURL=subscription.mjs.map