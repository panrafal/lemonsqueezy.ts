import{fetch as x}from"undici";import{join as L}from"node:path";var l=class extends Error{constructor(r,a,d){super(a);this.status=r;this.message=a;this.errors=d;this.name="LemonSqueezyError"}};async function u({apiKey:t,apiVersion:s="v1",baseUrl:r="https://api.lemonsqueezy.com",data:a,headers:d,include:f,method:m="GET",page:R,params:g,path:O}){try{let i=new URL(L(s,O),r);f&&i.searchParams.append("include",f.map(o=>c[o]).join(",")),R&&i.searchParams.append("page",R.toString()),g&&m==="GET"&&Object.entries(g).forEach(([o,e])=>i.searchParams.append(o,e));let n=await x(i.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${t}`,"Content-Type":"application/vnd.api+json",...d},method:m,...a&&m!=="GET"?{body:JSON.stringify(a)}:{}});if(!n.ok){let o=await n.json();throw new l(n.status,n.statusText,o.errors)}let p=await n.json();if(p.errors&&p.errors.length>0)throw p;return p}catch(i){throw i}}var c=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(c||{});async function y(t){let{variantId:s,...r}=t;return u({params:{...s?{variant_id:s}:{}},path:"/files",...r})}async function h(t){let{id:s,...r}=t;return u({path:`/files/${s}`,...r})}var B={listAllFiles:y,retrieveFile:h};export{B as default,y as listAllFiles,h as retrieveFile};
//# sourceMappingURL=file.mjs.map