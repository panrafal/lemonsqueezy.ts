import{fetch as O}from"undici";import{join as L}from"node:path";var C=class extends Error{constructor(s,o,d){super(o);this.status=s;this.message=o;this.errors=d;this.name="LemonSqueezyError"}};async function c({apiKey:r,apiVersion:t="v1",baseUrl:s="https://api.lemonsqueezy.com",data:o,headers:d,include:h,method:i="GET",page:l,params:m,path:g}){try{let n=new URL(L(t,g),s);h&&n.searchParams.append("include",h.map(u=>p[u]).join(",")),l&&n.searchParams.append("page",l.toString()),m&&i==="GET"&&Object.entries(m).forEach(([u,e])=>n.searchParams.append(u,e));let a=await O(n.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${r}`,"Content-Type":"application/vnd.api+json",...d},method:i,...o&&i!=="GET"?{body:JSON.stringify(o)}:{}});if(!a.ok){let u=await a.json();throw new C(a.status,a.statusText,u.errors)}let k=await a.json();if(k.errors&&k.errors.length>0)throw k;return k}catch(n){throw n}}var p=(e=>(e.checkouts="checkouts",e.customers="customers",e.discounts="discounts",e.files="files",e.license_key_instances="license-key-instances",e.license_keys="license-keys",e.order_items="order-items",e.orders="orders",e.products="products",e.stores="stores",e.subscriptions="subscriptions",e.subscription_invoices="subscription-invoices",e.users="users",e.variants="variants",e))(p||{});async function y(r){let{checkout_data:t,checkout_options:s,custom_price:o,expires_at:d,product_options:h,store:i,variant:l,...m}=r;return c({data:{data:{attributes:{checkout_data:t,checkout_options:s,custom_price:o,expires_at:d,product_options:h},relationships:{store:{data:{id:i,type:"stores"}},variant:{data:{id:l,type:"variants"}}},type:"checkouts"}},path:"/checkouts",method:"POST",...m})}async function R(r){let{storeId:t,variantId:s,...o}=r;return c({params:{...t?{store_id:t}:{},...s?{variant_id:s}:{}},path:"/checkouts",...o})}async function f(r){let{id:t,...s}=r;return c({path:`/checkouts/${t}`,...s})}var _={createCheckout:y,listAllCheckouts:R,retrieveCheckout:f};export{y as createCheckout,_ as default,R as listAllCheckouts,f as retrieveCheckout};
//# sourceMappingURL=checkout.mjs.map