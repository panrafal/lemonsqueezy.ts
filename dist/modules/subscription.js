"use strict";var R=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var q=(s,e)=>{for(var t in e)R(s,t,{get:e[t],enumerable:!0})},E=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of P(e))!T.call(s,n)&&n!==t&&R(s,n,{get:()=>e[n],enumerable:!(i=A(e,n))||i.enumerable});return s};var _=s=>E(R({},"__esModule",{value:!0}),s);var z={};q(z,{cancelSubscription:()=>g,default:()=>k,listAllSubscriptions:()=>f,retrieveSubscription:()=>h,updateSubscription:()=>y});module.exports=_(z);var x=require("undici"),L=require("path");var S=class extends Error{constructor(t,i,n){super(i);this.status=t;this.message=i;this.errors=n;this.name="LemonSqueezyError"}};async function u({apiKey:s,apiVersion:e="v1",baseUrl:t="https://api.lemonsqueezy.com",data:i,headers:n,include:o,method:p="GET",page:m,params:O,path:v}){try{let a=new URL((0,L.join)(e,v),t);o&&a.searchParams.append("include",o.map(d=>l[d]).join(",")),m&&a.searchParams.append("page",m.toString()),O&&p==="GET"&&Object.entries(O).forEach(([d,r])=>a.searchParams.append(d,r));let c=await(0,x.fetch)(a.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${s}`,"Content-Type":"application/vnd.api+json",...n},method:p,...i&&p!=="GET"?{body:JSON.stringify(i)}:{}});if(!c.ok){let d=await c.json();throw new S(c.status,c.statusText,d.errors)}let b=await c.json();if(b.errors&&b.errors.length>0)throw b;return b}catch(a){throw a}}var l=(r=>(r.checkouts="checkouts",r.customers="customers",r.discounts="discounts",r.files="files",r.license_key_instances="license-key-instances",r.license_keys="license-keys",r.order_items="order-items",r.orders="orders",r.products="products",r.stores="stores",r.subscriptions="subscriptions",r.subscription_invoices="subscription-invoices",r.users="users",r.variants="variants",r))(l||{});async function f(s){let{orderId:e,orderItemId:t,productId:i,storeId:n,variantId:o,...p}=s;return u({params:{...e?{order_id:e}:{},...t?{order_item_id:t}:{},...i?{product_id:i}:{},...n?{store_id:n}:{},...o?{variant_id:o}:{}},path:"/subscriptions",...p})}async function h(s){let{id:e,...t}=s;return u({path:`/subscriptions/${e}`,...t})}async function y(s){let{billingAnchor:e,cancelled:t,id:i,pause:n,productId:o,variantId:p,...m}=s;return u({data:{data:{attributes:{billing_anchor:e,cancelled:t,pause:n,product_id:o,variant_id:p},id:i,type:"subscriptions"}},path:`/subscriptions/${i}`,method:"PATCH",...m})}async function g(s){let{id:e,...t}=s;return u({path:`/subscriptions/${e}`,method:"DELETE",...t})}var k={listAllSubscriptions:f,retrieveSubscription:h,updateSubscription:y,cancelSubscription:g};0&&(module.exports={cancelSubscription,listAllSubscriptions,retrieveSubscription,updateSubscription});
//# sourceMappingURL=subscription.js.map