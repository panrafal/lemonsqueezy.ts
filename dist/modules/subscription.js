"use strict";var S=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var A=(s,e)=>{for(var r in e)S(s,r,{get:e[r],enumerable:!0})},q=(s,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of P(e))!T.call(s,i)&&i!==r&&S(s,i,{get:()=>e[i],enumerable:!(n=v(e,i))||n.enumerable});return s};var E=s=>q(S({},"__esModule",{value:!0}),s);var k={};A(k,{cancelSubscription:()=>y,default:()=>_,listAllSubscriptions:()=>R,retrieveSubscription:()=>f,updateSubscription:()=>h});module.exports=E(k);var g=require("undici"),L=require("path");async function u({apiKey:s,apiVersion:e="v1",baseUrl:r="https://api.lemonsqueezy.com",data:n,headers:i,include:o,method:p="GET",page:m,params:O,path:x}){try{let a=new URL((0,L.join)(e,x),r);o&&a.searchParams.append("include",o.map(d=>l[d]).join(",")),m&&a.searchParams.append("page",m.toString()),O&&p==="GET"&&Object.entries(O).forEach(([d,t])=>a.searchParams.append(d,t));let c=await(0,g.fetch)(a.href,{headers:{Accept:"application/vnd.api+json",Authorization:`Bearer ${s}`,"Content-Type":"application/vnd.api+json",...i},method:p,...n&&p!=="GET"?{body:JSON.stringify(n)}:{}});if(!c.ok){let d=await c.json();throw{status:c.status,message:c.statusText,errors:d.errors}}let b=await c.json();if(b.errors&&b.errors.length>0)throw b;return b}catch(a){throw a}}var l=(t=>(t.checkouts="checkouts",t.customers="customers",t.discounts="discounts",t.files="files",t.license_key_instances="license-key-instances",t.license_keys="license-keys",t.order_items="order-items",t.orders="orders",t.products="products",t.stores="stores",t.subscriptions="subscriptions",t.subscription_invoices="subscription-invoices",t.users="users",t.variants="variants",t))(l||{});async function R(s){let{orderId:e,orderItemId:r,productId:n,storeId:i,variantId:o,...p}=s;return u({params:{...e?{order_id:e}:{},...r?{order_item_id:r}:{},...n?{product_id:n}:{},...i?{store_id:i}:{},...o?{variant_id:o}:{}},path:"/subscriptions",...p})}async function f(s){let{id:e,...r}=s;return u({path:`/subscriptions/${e}`,...r})}async function h(s){let{billingAnchor:e,cancelled:r,id:n,pause:i,productId:o,variantId:p,...m}=s;return u({data:{data:{attributes:{billing_anchor:e,cancelled:r,pause:i,product_id:o,variant_id:p},id:n,type:"subscriptions"}},path:`/subscriptions/${n}`,method:"PATCH",...m})}async function y(s){let{id:e,...r}=s;return u({path:`/subscriptions/${e}`,method:"DELETE",...r})}var _={listAllSubscriptions:R,retrieveSubscription:f,updateSubscription:h,cancelSubscription:y};0&&(module.exports={cancelSubscription,listAllSubscriptions,retrieveSubscription,updateSubscription});
//# sourceMappingURL=subscription.js.map